#!/usr/bin/env python3

import argparse
import json

from dotops.modules.exec import exec_module
from dotops.cli import set_log_level

parser = argparse.ArgumentParser()

parser.add_argument('module', nargs='?')
parser.add_argument('data', nargs=argparse.REMAINDER)


def main():
    set_log_level()

    args = parser.parse_args()
    module = args.module

    if len(args.data) == 1:
        data = json.loads(args.data[0])
    else:
        pass

    exec_module(module, data)


if __name__ == '__main__':
    main()
